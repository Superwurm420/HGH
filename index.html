<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#0b5cff" />
  <meta name="description" content="HGH Hildesheim – Stundenplan, Links & Instagram als PWA" />
  <meta name="color-scheme" content="dark light" />

  <title>HGH Hildesheim</title>

  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="icon" href="./icons/icon-192.png" />
  <link rel="apple-touch-icon" href="./icons/icon-192.png" />

  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <a class="skip" href="#main">Zum Inhalt springen</a>

  <header class="topbar">
    <div class="brand">
      <div class="logo" aria-hidden="true">HGH</div>
      <div class="brandText">
        <div class="brandTitle">Holztechnik und Gestaltung Hildesheim</div>
        <div class="brandSub">Fachschule</div>
      </div>
    </div>

    <div class="topActions">
      <button id="darkToggle" class="iconBtn surface" type="button" aria-label="Farbschema umschalten" title="Theme">
        <span class="icon" aria-hidden="true">◐</span>
      </button>
    </div>
  </header>

  <nav class="nav" aria-label="Hauptnavigation">
    <button class="navItem surface" data-route="home" aria-current="page">
      <span class="navIcon" aria-hidden="true">⌂</span>
      <span>Home</span>
    </button>
    <button class="navItem surface" data-route="timetable">
      <span class="navIcon" aria-hidden="true">▦</span>
      <span>Stundenplan</span>
    </button>
    <button class="navItem surface" data-route="week">
      <span class="navIcon" aria-hidden="true">☷</span>
      <span>Woche</span>
    </button>
    <button class="navItem surface" data-route="links">
      <span class="navIcon" aria-hidden="true">⛓</span>
      <span>Links</span>
    </button>
    <button class="navItem surface" data-route="instagram">
      <span class="navIcon" aria-hidden="true">◎</span>
      <span>Instagram</span>
    </button>
  </nav>

  <main id="main" class="main">
    <!-- HOME -->
    <section class="view" data-view="home">
      <div class="card hero surface">
        <div class="heroLeft">
          <h1>HGH Hildesheim</h1>
          <p class="muted">
            Schnellzugriff auf Stundenplan, Links und Instagram – offlinefähig als PWA.
          </p>

          <div class="chips" aria-label="Schnellinfos" role="list">
            <span class="chip" role="listitem">Mobile-first</span>
            <span class="chip" role="listitem">Offline Cache</span>
            <span class="chip" role="listitem">Dark Mode</span>
          </div>

          <div class="ctaRow">
            <button class="btn" data-route-jump="timetable" type="button">Zum Stundenplan</button>
            <a class="btn secondary" href="https://holztechnik-hildesheim.de/" target="_blank" rel="noopener">Schul-Website</a>
          </div>
        </div>

        <div class="heroRight" aria-hidden="true">
          <div class="glassBlob"></div>
          <div class="stats">
            <div class="stat">
              <div class="statNum">7</div>
              <div class="statLabel">Klassen</div>
            </div>
            <div class="stat">
              <div class="statNum">Mo–Fr</div>
              <div class="statLabel">Tagesansicht</div>
            </div>
            <div class="stat">
              <div class="statNum">PWA</div>
              <div class="statLabel">Installierbar</div>
            </div>
          </div>
        </div>
      </div>

      <div class="grid2">
        <div class="card surface">
          <h2>Heute</h2>
          <div class="netRow" aria-label="Netzwerkstatus">
            <span id="netIndicator" class="netIndicator" data-status="unknown" aria-hidden="true"></span>
            <span id="netLabel" class="small muted">—</span>
          </div>

          <div class="countdown" aria-label="Countdown zur nächsten Stunde">
            <div class="countdownTop">
              <div class="small muted">Aktuelle Uhrzeit</div>
              <div id="nowTime" class="nowTime">—</div>
            </div>
            <div id="countdownText" class="countdownText">—</div>
          </div>

          <p class="muted" id="todayLabel">—</p>
          <div id="todayPreview" class="list" aria-label="Heutiger Stundenplan (Vorschau)"></div>
          <div class="small muted">Tipp: In „Stundenplan“ Klasse auswählen.</div>
        </div>

        <div class="card surface">
          <h2>Installieren</h2>
          <p class="muted">Diese Seite ist eine Progressive Web App.</p>
          <ul class="bullets">
            <li>Android/Chrome: Menü → „App installieren“</li>
            <li>iOS/Safari: Teilen → „Zum Home-Bildschirm“</li>
          </ul>
          <div id="installHint" class="hint" role="status" aria-live="polite"></div>
        </div>
      </div>
    </section>

    <!-- WEEK -->
    <section class="view" data-view="week" hidden>
      <div class="card surface">
        <div class="row wrap">
          <div>
            <h2>Wochenübersicht</h2>
            <p class="muted">Schnell-Überblick Mo–Fr.</p>
          </div>

          <div class="controls">
            <label class="control">
              <span class="controlLabel">Klasse</span>
              <select id="weekClassSelect" class="select" aria-label="Klasse für Wochenübersicht auswählen"></select>
            </label>
          </div>
        </div>

        <div id="weekGrid" class="weekGrid" role="table" aria-label="Wochenübersicht"></div>
      </div>
    </section>

    <!-- TIMETABLE -->
    <section class="view" data-view="timetable" hidden>
      <div class="card surface">
        <div class="row wrap">
          <div>
            <h2>Stundenplan</h2>
            <p class="muted">Klasse auswählen und Tag ansehen.</p>
          </div>

          <div class="controls">
            <label class="control">
              <span class="controlLabel">Klasse</span>
              <select id="classSelect" class="select" aria-label="Klasse auswählen"></select>
            </label>

            <label class="control">
              <span class="controlLabel">Tag</span>
              <select id="daySelect" class="select" aria-label="Tag auswählen"></select>
            </label>

            <button id="todayBtn" class="btn secondary" type="button">Heute</button>
          </div>
        </div>

        <div class="timetable" role="table" aria-label="Stundenplan">
          <div class="timetableHeader" role="row">
            <div class="th" role="columnheader">Zeit</div>
            <div class="th" role="columnheader">Fach</div>
            <div class="th" role="columnheader">Lehrkraft / Raum</div>
          </div>
          <div id="timetableBody" class="timetableBody" role="rowgroup"></div>
        </div>

        <div id="ttError" class="errorBox" hidden>
          <div class="errorTitle">Stundenplan konnte nicht geladen werden.</div>
          <div id="ttErrorMsg" class="small muted">—</div>
          <div class="errorActions">
            <button id="retryBtn" class="btn" type="button">Erneut versuchen</button>
          </div>
        </div>

        <div class="small muted" style="margin-top:12px;">
          Hinweis: Aktuell sind Beispiel-Daten hinterlegt. Sobald die PDF-Daten vorliegen, kann der Plan 1:1 eingepflegt werden.
        </div>
      </div>
    </section>

    <!-- LINKS -->
    <section class="view" data-view="links" hidden>
      <div class="card surface">
        <h2>Links</h2>
        <p class="muted">Wichtige Schnellzugriffe.</p>

        <div class="linkCards">
          <a class="linkCard" href="https://holztechnik-hildesheim.de/" target="_blank" rel="noopener">
            <div class="linkTitle">Schul-Website</div>
            <div class="linkUrl">holztechnik-hildesheim.de</div>
          </a>

          <a class="linkCard" href="https://www.instagram.com/hgh.hildesheim" target="_blank" rel="noopener">
            <div class="linkTitle">Instagram (HGH)</div>
            <div class="linkUrl">@hgh.hildesheim</div>
          </a>

          <a class="linkCard" href="https://www.instagram.com/hgh.gestaltung" target="_blank" rel="noopener">
            <div class="linkTitle">Instagram (Gestaltung)</div>
            <div class="linkUrl">@hgh.gestaltung</div>
          </a>

          <a class="linkCard" href="https://www.instagram.com/hgh.holztechnik" target="_blank" rel="noopener">
            <div class="linkTitle">Instagram (Holztechnik)</div>
            <div class="linkUrl">@hgh.holztechnik</div>
          </a>
        </div>
      </div>
    </section>

    <!-- INSTAGRAM -->
    <section class="view" data-view="instagram" hidden>
      <div class="card surface">
        <h2>Instagram</h2>
        <p class="muted">
          Embed ist oft durch Tracking/Cookies/CORS eingeschränkt. Daher bieten wir standardmäßig den direkten Link.
        </p>

        <div class="igGrid" id="igGrid" aria-label="Instagram Vorschau" role="list">
          <a class="igTile igCTA" href="https://www.instagram.com/hgh.hildesheim" target="_blank" rel="noopener" aria-label="Instagram-Profil @hgh.hildesheim öffnen" role="listitem">
            <div class="igTileTop">
              <div class="igAvatar" aria-hidden="true">HGH</div>
              <div>
                <div class="igHandle">@hgh.hildesheim</div>
                <div class="small muted">Profil öffnen</div>
              </div>
            </div>
            <div class="igHover">Tippe hier, um das Profil zu öffnen.</div>
          </a>

          <div class="igTile igInfo" role="listitem" aria-label="Hinweis: Vorschau ohne API">
            <div class="igTileCenter">
              <div class="small muted">
                Aus Datenschutz-/CORS-Gründen wird kein öffentliches Grid geladen.
                <br/>Nutze den Button „Profil öffnen“.
              </div>
            </div>
          </div>
        </div>

        <div class="igBox">
          <div class="row wrap" style="align-items:center; justify-content:space-between; gap:12px;">
            <div>
              <div class="igHandle">@hgh.hildesheim</div>
              <div class="small muted">Ohne offizielle API zeigen wir standardmäßig nur eine Vorschau + Link.</div>
            </div>
            <a class="btn" href="https://www.instagram.com/hgh.hildesheim" target="_blank" rel="noopener">Profil öffnen</a>
          </div>
        </div>
      </div>
    </section>

    <footer class="footer">
      <div class="small muted">© <span id="year"></span> HGH Hildesheim · Offline-fähige PWA</div>
      <div class="small muted" id="swStatus" aria-live="polite"></div>
    </footer>
  </main>

  <script src="./app.js" defer></script>
</body>
</html>
