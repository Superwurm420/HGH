<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#0b5cff" />
  <meta name="description" content="HGH Hildesheim – Stundenplan, Links & Instagram als Progressive Web App. Offline-fähig, mobile-first und mit Dark Mode." />
  <meta name="color-scheme" content="dark light" />
  
  <!-- Open Graph / Social Media -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="HGH Hildesheim – Schüler-PWA" />
  <meta property="og:description" content="Stundenplan, Links & Instagram – offline-fähig als Progressive Web App" />
  <meta property="og:url" content="https://superwurm420.github.io/HGH/" />
  
  <!-- PWA -->
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="HGH Hildesheim" />

  <title>HGH Hildesheim – Schüler-PWA</title>

  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="icon" href="./icons/icon-192.png" />
  <link rel="apple-touch-icon" href="./icons/icon-192.png" />

  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <!-- Skip Link für Accessibility -->
  <a class="skip" href="#main">Zum Inhalt springen</a>

  <!-- Header -->
  <header class="topbar" role="banner">
    <div class="brand">
      <div class="logo" aria-hidden="true">
        <img 
          class="logoImg" 
          src="./icons/logo-header.png" 
          alt="" 
          width="44" 
          height="44" 
          loading="eager" 
          style="width:44px;height:44px;max-width:44px;max-height:44px;" 
        />
      </div>
      <div class="brandText">
        <div class="brandTitle">Holztechnik und Gestaltung Hildesheim</div>
        <div class="brandSub">Fachschule</div>
      </div>
    </div>

    <div class="topActions">
      <button 
        id="darkToggle" 
        class="iconBtn surface" 
        type="button" 
        aria-label="Farbschema umschalten" 
        title="Dark/Light Mode wechseln"
      >
        <span class="icon" aria-hidden="true">◐</span>
      </button>
    </div>
  </header>

  <!-- Navigation -->
  <nav class="nav" role="navigation" aria-label="Hauptnavigation">
    <button class="navItem surface" data-route="home" aria-current="page" type="button">
      <span class="navIcon" aria-hidden="true">⌂</span>
      <span>Home</span>
    </button>
    <button class="navItem surface" data-route="timetable" type="button">
      <span class="navIcon" aria-hidden="true">▦</span>
      <span>Stundenplan</span>
    </button>
    <button class="navItem surface" data-route="week" type="button">
      <span class="navIcon" aria-hidden="true">☷</span>
      <span>Woche</span>
    </button>
    <button class="navItem surface" data-route="links" type="button">
      <span class="navIcon" aria-hidden="true">⛓</span>
      <span>Links</span>
    </button>
    <button class="navItem surface" data-route="instagram" type="button">
      <span class="navIcon" aria-hidden="true">◎</span>
      <span>Instagram</span>
    </button>
  </nav>

  <!-- Main Content -->
  <main id="main" class="main">
    
    <!-- HOME VIEW -->
    <section class="view" data-view="home">
      <div class="card hero surface">
        <div class="heroLeft">
          <h1>HGH Hildesheim</h1>
          <p class="muted">
            Schnellzugriff auf Stundenplan, Links und Instagram – offlinefähig als PWA.
          </p>

          <div class="chips" aria-label="Features" role="list">
            <span class="chip" role="listitem">Mobile-first</span>
            <span class="chip" role="listitem">Offline Cache</span>
            <span class="chip" role="listitem">Dark Mode</span>
          </div>

          <div class="ctaRow">
            <button 
              class="btn" 
              data-route-jump="timetable" 
              type="button"
              aria-label="Zum Stundenplan wechseln"
            >
              Zum Stundenplan
            </button>
            <a 
              class="btn secondary" 
              href="https://holztechnik-hildesheim.de/" 
              target="_blank" 
              rel="noopener noreferrer"
            >
              Schul-Website
            </a>
            <a 
              class="btn secondary" 
              href="./plan/Stundenplan_kw_45_Hj1_2025_26.pdf"
              target="_blank"
              rel="noopener"
              aria-label="Stundenplan als PDF herunterladen"
              data-pdf-link
            >
              PDF-Stundenplan
            </a>
          </div>
        </div>

        <div class="heroRight" aria-hidden="true">
          <div class="glassBlob"></div>
          <div class="stats">
            <div class="stat">
              <div class="statNum">7</div>
              <div class="statLabel">Klassen</div>
            </div>
            <div class="stat">
              <div class="statNum">Mo–Fr</div>
              <div class="statLabel">Tagesansicht</div>
            </div>
            <div class="stat">
              <div class="statNum">PWA</div>
              <div class="statLabel">Installierbar</div>
            </div>
          </div>
        </div>
      </div>

      <div class="grid2">
        <!-- Heute-Karte -->
        <div class="card surface">
          <h2>Heute</h2>
          
          <!-- Changelog Box -->
          <div id="changelogBox" class="changelogBox" role="region" aria-label="Neuigkeiten">
            <div class="changelogHead">
              <div class="changelogTitle">Neu</div>
            </div>
            <ul id="changelog" class="bullets" aria-label="Letzte Updates"></ul>
          </div>
          
          <!-- Netzwerkstatus -->
          <div class="netRow" role="status" aria-label="Netzwerkstatus">
            <span 
              id="netIndicator" 
              class="netIndicator" 
              data-status="unknown" 
              aria-hidden="true"
            ></span>
            <span id="netLabel" class="small muted">—</span>
          </div>

          <!-- Countdown -->
          <div class="countdown" role="region" aria-label="Countdown zur nächsten Stunde">
            <div class="countdownTop">
              <div class="small muted">Aktuelle Uhrzeit</div>
              <div id="nowTime" class="nowTime" aria-live="polite">—</div>
            </div>
            <div id="countdownText" class="countdownText" aria-live="polite">—</div>
            <div id="funMessage" class="funMessage" aria-live="polite">&nbsp;</div>
          </div>

          <!-- Heute-Vorschau -->
          <p class="muted" id="todayLabel">—</p>
          <div 
            id="todayPreview" 
            class="list" 
            role="region" 
            aria-label="Heutiger Stundenplan (Vorschau)"
          ></div>
          <div class="small muted">Tipp: In „Stundenplan" Klasse auswählen.</div>
        </div>

        <!-- Install-Karte -->
        <div class="card surface">
          <h2>Installieren</h2>
          <p class="muted">Diese Seite ist eine Progressive Web App.</p>

          <!-- Install-Banner (nur für Erstbesucher) -->
          <div 
            id="installBanner" 
            class="installBanner" 
            role="status" 
            aria-live="polite" 
            hidden
          >
            <div class="installBannerText">
              Installiere diese App für Offline-Zugriff: Android = Menü → 'App installieren', iOS = Teilen → 'Zum Home-Bildschirm'
            </div>
            <button 
              id="installBannerClose" 
              class="installBannerClose" 
              type="button" 
              aria-label="Hinweis schließen"
            >
              ×
            </button>
          </div>

          <ul class="bullets">
            <li>Android/Chrome: Menü → „App installieren"</li>
            <li>iOS/Safari: Teilen → „Zum Home-Bildschirm"</li>
          </ul>

          <div 
            id="installHint" 
            class="hint" 
            role="status" 
            aria-live="polite"
          ></div>
        </div>
      </div>
    </section>

    <!-- WEEK VIEW -->
    <section class="view" data-view="week" hidden>
      <div class="card surface">
        <div class="row wrap">
          <div>
            <h2>Wochenübersicht</h2>
            <p class="muted">Schnell-Überblick Mo–Fr.</p>
          </div>

          <div class="controls">
            <label class="control">
              <span class="controlLabel">Klasse</span>
              <select 
                id="weekClassSelect" 
                class="select" 
                aria-label="Klasse für Wochenübersicht auswählen"
              ></select>
            </label>

            <a 
              class="btn secondary" 
              href="./plan/Stundenplan_kw_45_Hj1_2025_26.pdf"
              target="_blank"
              rel="noopener"
              aria-label="Stundenplan als PDF öffnen"
              data-pdf-link
            >
              PDF-Stundenplan
            </a>
          </div>
        </div>

        <div 
          id="weekGrid" 
          class="weekGrid" 
          role="table" 
          aria-label="Wochenübersicht aller Stunden"
        ></div>
      </div>
    </section>

    <!-- TIMETABLE VIEW -->
    <section class="view" data-view="timetable" hidden>
      <div class="card surface">
        <div class="row wrap">
          <div>
            <h2>Stundenplan</h2>
            <p class="muted">Klasse auswählen und Tag ansehen.</p>
          </div>

          <div class="controls">
            <!-- Klassen-Auswahl -->
            <label class="control">
              <span class="controlLabel">Klasse</span>
              <select 
                id="classSelect" 
                class="select" 
                aria-label="Klasse auswählen"
              ></select>
            </label>

            <!-- Tages-Auswahl -->
            <div class="control">
              <span class="controlLabel">Tag</span>
              <div 
                id="daySelectGroup" 
                class="daySelectGroup" 
                role="group" 
                aria-label="Wochentag auswählen"
              >
                <button 
                  type="button" 
                  class="dayBtn" 
                  data-day="mo"
                  aria-label="Montag"
                >
                  Mo
                </button>
                <button 
                  type="button" 
                  class="dayBtn" 
                  data-day="di"
                  aria-label="Dienstag"
                >
                  Di
                </button>
                <button 
                  type="button" 
                  class="dayBtn" 
                  data-day="mi"
                  aria-label="Mittwoch"
                >
                  Mi
                </button>
                <button 
                  type="button" 
                  class="dayBtn" 
                  data-day="do"
                  aria-label="Donnerstag"
                >
                  Do
                </button>
                <button 
                  type="button" 
                  class="dayBtn" 
                  data-day="fr"
                  aria-label="Freitag"
                >
                  Fr
                </button>
              </div>
            </div>

            <!-- Heute-Button -->
            <button 
              id="todayBtn" 
              class="btn secondary" 
              type="button"
              aria-label="Zum heutigen Tag springen"
            >
              Heute
            </button>
          </div>
        </div>

        <!-- Stundenplan-Tabelle -->
        <div
          class="timetable"
          role="table"
          aria-label="Stundenplan-Tabelle"
        >
          <div class="timetableHeader" role="row">
            <div class="th" role="columnheader">Zeit</div>
            <div class="th" role="columnheader">Fach</div>
            <div class="th" role="columnheader">Lehrer</div>
            <div class="th" role="columnheader">Raum</div>
          </div>
          <div 
            id="timetableBody" 
            class="timetableBody" 
            role="rowgroup"
          ></div>
        </div>

        <!-- Fehlerbox -->
        <div 
          id="ttError" 
          class="errorBox" 
          role="alert" 
          aria-live="assertive"
          hidden
        >
          <div class="errorTitle">Stundenplan konnte nicht geladen werden.</div>
          <div id="ttErrorMsg" class="small muted">—</div>
          <div class="errorActions">
            <button 
              id="retryBtn" 
              class="btn" 
              type="button"
              aria-label="Stundenplan erneut laden"
            >
              Erneut versuchen
            </button>
          </div>
        </div>

      </div>
    </section>

    <!-- LINKS VIEW -->
    <section class="view" data-view="links" hidden>
      <div class="card surface">
        <h2>Links</h2>
        <p class="muted">Wichtige Schnellzugriffe.</p>

        <nav class="linkCards" aria-label="Wichtige Links">
          <a 
            class="linkCard" 
            href="https://holztechnik-hildesheim.de/" 
            target="_blank" 
            rel="noopener noreferrer"
          >
            <div class="linkTitle">Schul-Website</div>
            <div class="linkUrl">holztechnik-hildesheim.de</div>
          </a>

          <a 
            class="linkCard" 
            href="./plan/Stundenplan_kw_45_Hj1_2025_26.pdf"
            target="_blank"
            rel="noopener"
            data-pdf-link
          >
            <div class="linkTitle">Stundenplan (PDF)</div>
            <div class="linkUrl">PDF herunterladen</div>
          </a>

          <a 
            class="linkCard" 
            href="https://hgh-hi.regio-box.net/" 
            target="_blank" 
            rel="noopener noreferrer"
          >
            <div class="linkTitle">Nextcloud</div>
            <div class="linkUrl">hgh-hi.regio-box.net</div>
          </a>
        </nav>
      </div>
    </section>

    <!-- INSTAGRAM VIEW -->
    <section class="view" data-view="instagram" hidden>
      <div class="card surface">
        <h2>Instagram</h2>
        <p class="muted">Schnellzugriff auf die wichtigsten Profile</p>

        <div class="igProfiles" id="igProfiles">
          <!-- HT21 -->
          <a class="igProfile" href="https://www.instagram.com/usf_ht21" target="_blank" rel="noopener noreferrer" data-ig="ht21">
            <div class="igProfileHeader">
              <div class="igAvatarRing">
                <img src="./icons/logo-lunido.svg" alt="LUNIDO" class="igAvatar" loading="lazy" />
              </div>
              <div class="igProfileInfo">
                <div class="igName">HT21 – Lunido</div>
                <div class="igHandle">@usf_ht21</div>
                <div class="igFollowers" data-ig-followers="ht21"></div>
              </div>
            </div>
            <div class="igPreviewGrid" data-ig-grid="ht21">
              <div class="igPreviewPlaceholder"></div>
              <div class="igPreviewPlaceholder"></div>
              <div class="igPreviewPlaceholder"></div>
            </div>
            <span class="igOpenLabel">Auf Instagram öffnen</span>
          </a>

          <!-- HT22 -->
          <a class="igProfile" href="https://www.instagram.com/usf_ht22" target="_blank" rel="noopener noreferrer" data-ig="ht22">
            <div class="igProfileHeader">
              <div class="igAvatarRing">
                <img src="./icons/logo-lys.svg" alt="LYS" class="igAvatar" loading="lazy" />
              </div>
              <div class="igProfileInfo">
                <div class="igName">HT22 – LYS</div>
                <div class="igHandle">@usf_ht22</div>
                <div class="igFollowers" data-ig-followers="ht22"></div>
              </div>
            </div>
            <div class="igPreviewGrid" data-ig-grid="ht22">
              <div class="igPreviewPlaceholder"></div>
              <div class="igPreviewPlaceholder"></div>
              <div class="igPreviewPlaceholder"></div>
            </div>
            <span class="igOpenLabel">Auf Instagram öffnen</span>
          </a>

          <!-- Schule -->
          <a class="igProfile" href="https://www.instagram.com/hgh.hildesheim" target="_blank" rel="noopener noreferrer" data-ig="schule">
            <div class="igProfileHeader">
              <div class="igAvatarRing">
                <img src="./icons/logo-hgh-grid.svg" alt="HGH" class="igAvatar" loading="lazy" />
              </div>
              <div class="igProfileInfo">
                <div class="igName">HGH Hildesheim</div>
                <div class="igHandle">@hgh.hildesheim</div>
                <div class="igFollowers" data-ig-followers="schule"></div>
              </div>
            </div>
            <div class="igPreviewGrid" data-ig-grid="schule">
              <div class="igPreviewPlaceholder"></div>
              <div class="igPreviewPlaceholder"></div>
              <div class="igPreviewPlaceholder"></div>
            </div>
            <span class="igOpenLabel">Auf Instagram öffnen</span>
          </a>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
      <div class="small muted">
        © <span id="year"></span> HGH Hildesheim · Offline-fähige PWA
      </div>
      <div 
        class="small muted" 
        id="swStatus" 
        role="status" 
        aria-live="polite"
      ></div>
    </footer>
  </main>

  <!-- JavaScript -->
  <script src="./app.js" defer></script>
</body>
</html>
