:root{
  --bg0:#070b14;
  --bg1:#0a1022;
  --surface:rgba(255,255,255,.08);
  --surface2:rgba(255,255,255,.12);
  --text:#eaf1ff;
  --muted:rgba(234,241,255,.70);
  --line:rgba(255,255,255,.14);
  --accent:#0b5cff;
  --accent2:#4ac7ff;
  --shadow:0 20px 60px rgba(0,0,0,.35);
  --radius:18px;
  --radius2:14px;
  --blur:16px;
  
  /* Spacing */
  --space-xs:4px;
  --space-sm:8px;
  --space-md:12px;
  --space-lg:16px;
  --space-xl:24px;
}

[data-theme="light"]{
  --bg0:#f6f9ff;
  --bg1:#eef4ff;
  --surface:rgba(0,0,0,.05);
  --surface2:rgba(0,0,0,.08);
  --text:#0b1220;
  --muted:rgba(11,18,32,.65);
  --line:rgba(11,18,32,.12);
  --shadow:0 18px 50px rgba(10,30,80,.12);
}

/* Light-Mode-Overrides für Elemente mit hardcodierten rgba(255,255,255,…) */
[data-theme="light"] .select,
[data-theme="light"] .dayBtn,
[data-theme="light"] .chip {
  background:rgba(0,0,0,.06);
}

[data-theme="light"] .countdown,
[data-theme="light"] .stat,
[data-theme="light"] .listItem {
  background:rgba(0,0,0,.04);
}

[data-theme="light"] .installBannerClose {
  background:rgba(0,0,0,.05);
}

[data-theme="light"] .weekHeader {
  background:rgba(0,0,0,.07);
}

[data-theme="light"] .calCell:hover {
  background:rgba(0,0,0,.05);
}

/* Base Styles */
*{
  box-sizing:border-box;
}

html,body{
  height:100%;
  margin:0;
}

body{
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
  color:var(--text);
  background:
    radial-gradient(1000px 700px at 20% 10%, rgba(11,92,255,.35), transparent 60%),
    radial-gradient(900px 700px at 80% 20%, rgba(74,199,255,.25), transparent 55%),
    linear-gradient(180deg, var(--bg0), var(--bg1));
  overflow-x:hidden;
  /* Verhindert Flash beim Theme-Wechsel */
  transition: background 180ms ease;
}

/* Accessibility */
.skip{
  position:absolute;
  left:-9999px;
  top:10px;
  background:var(--accent);
  color:white;
  padding:10px 12px;
  border-radius:10px;
  z-index:999;
  font-weight:600;
  text-decoration:none;
}
.skip:focus{
  left:12px;
}

/* Focus Styles */
button:focus-visible,
a:focus-visible,
select:focus-visible{
  outline:3px solid var(--accent);
  outline-offset:2px;
}

/* Header / Topbar */
.topbar{
  position:sticky;
  top:0;
  z-index:50;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:14px;
  background:linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,0));
  backdrop-filter:blur(10px);
  -webkit-backdrop-filter:blur(10px); /* Safari support */
}

.brand{
  display:flex;
  align-items:center;
  gap:10px;
  min-width:0; /* Ermöglicht text-overflow */
}

.logo{
  width:44px;
  height:44px;
  min-width:44px; /* Verhindert Schrumpfen */
  min-height:44px;
  border-radius:14px;
  display:grid;
  place-items:center;
  overflow:hidden;
  background:linear-gradient(135deg, var(--accent), var(--accent2));
  box-shadow:0 10px 30px rgba(11,92,255,.35);
  flex-shrink:0;
}

.logoImg{
  width:44px;
  height:44px;
  max-width:44px;
  max-height:44px;
  object-fit:contain;
  display:block;
}

.brandText{
  min-width:0;
}

.brandTitle{
  font-weight:750;
  font-size:15px;
  line-height:1.1;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.brandSub{
  font-size:12px;
  color:var(--muted);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.topActions{
  display:flex;
  gap:10px;
}

/* Shared Surface Style */
.surface{
  border:1px solid var(--line);
  background:var(--surface);
  box-shadow:var(--shadow);
  backdrop-filter:blur(var(--blur));
  -webkit-backdrop-filter:blur(var(--blur)); /* Safari */
}

/* Icon Button */
.iconBtn{
  appearance:none;
  cursor:pointer;
  width:44px;
  height:44px;
  border-radius:14px;
  color:var(--text);
  display:grid;
  place-items:center;
  transition:transform 80ms ease;
}

.iconBtn:active{
  transform:translateY(1px);
}

.iconBtn .icon{
  font-size:20px;
}

/* Navigation */
.nav{
  position:sticky;
  top:74px;
  z-index:40;
  display:flex;
  gap:10px;
  padding:10px 12px 12px;
  justify-content:space-between;
}

.navItem{
  appearance:none;
  cursor:pointer;
  flex:1;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:6px;
  padding:10px 8px;
  border-radius:16px;
  color:var(--text);
  transition:all 120ms ease;
  font-size:13px;
  font-weight:600;
}

.navIcon{
  font-size:16px;
  opacity:.9;
}

.navItem[aria-current="page"]{
  border-color:rgba(11,92,255,.55);
  box-shadow:0 0 0 4px rgba(11,92,255,.15);
  background:rgba(11,92,255,.08);
}

.navItem:hover:not([aria-current="page"]){
  background:rgba(255,255,255,.04);
}

/* Main Layout */
.main{
  padding:0 12px 26px;
  max-width:980px;
  margin:0 auto;
}

.view{
  padding-top:10px;
  display:flex;
  flex-direction:column;
  gap:14px;
}
.view[hidden]{
  display:none;
}

/* Cards */
.card{
  padding:16px;
  border-radius:var(--radius);
}

/* Hero Section */
.hero{
  display:grid;
  gap:16px;
}

.hero h1{
  margin:0 0 6px;
  font-size:26px;
  letter-spacing:-.2px;
  font-weight:800;
}

.muted{
  color:var(--muted);
}

/* Chips */
.chips{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin:14px 0;
}

.chip{
  font-size:12px;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.06);
  font-weight:600;
}

/* Buttons */
.btn{
  appearance:none;
  cursor:pointer;
  border:1px solid rgba(255,255,255,.12);
  background:linear-gradient(135deg, var(--accent), var(--accent2));
  color:white;
  padding:10px 14px;
  border-radius:14px;
  font-weight:650;
  text-decoration:none;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  transition:transform 80ms ease;
  font-size:14px;
}

.btn.secondary{
  background:var(--surface2);
  color:var(--text);
  border:1px solid var(--line);
}

.btn:hover{
  transform:translateY(-1px);
}

.btn:active{
  transform:translateY(1px);
}

.btn:disabled{
  opacity:.5;
  cursor:not-allowed;
}

/* Hero Right */
.heroRight{
  position:relative;
  min-height:160px;
}

.glassBlob{
  position:absolute;
  inset:0;
  border-radius:var(--radius);
  background:
    radial-gradient(600px 300px at 30% 30%, rgba(255,255,255,.18), transparent 60%),
    linear-gradient(135deg, rgba(11,92,255,.25), rgba(74,199,255,.12));
  border:1px solid rgba(255,255,255,.16);
}

.stats{
  position:relative;
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  padding:10px;
}

.stat{
  border-radius:16px;
  background:rgba(255,255,255,.06);
  border:1px solid var(--line);
  padding:12px;
  text-align:center;
}

.statNum{
  font-weight:800;
  font-size:18px;
}

.statLabel{
  font-size:12px;
  color:var(--muted);
  margin-top:2px;
}

/* Grid Layout */
.grid2{
  display:grid;
  grid-template-columns:1fr;
  gap:12px;
  margin-top:12px;
}

/* Network Indicator */
.netRow{
  display:flex;
  align-items:center;
  gap:8px;
  margin:6px 0 12px;
}

.netIndicator{
  width:10px;
  height:10px;
  border-radius:999px;
  background:rgba(255,255,255,.25);
  border:1px solid var(--line);
  transition:background 200ms ease;
}

.netIndicator[data-status="online"]{
  background:rgba(60,255,145,.9);
  box-shadow:0 0 10px rgba(60,255,145,.4);
}

.netIndicator[data-status="offline"]{
  background:rgba(255,92,92,.95);
  box-shadow:0 0 10px rgba(255,92,92,.4);
}

/* Countdown */
.countdown{
  margin:10px 0 12px;
  padding:12px;
  border-radius:16px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.06);
  display:grid;
  gap:8px;
}

.countdownTop{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap:12px;
}

.nowTime{
  font-weight:900;
  font-size:22px;
  letter-spacing:.4px;
  font-variant-numeric:tabular-nums;
}

.countdownText{
  font-weight:800;
  font-size:15px;
}

.funMessage{
  font-size:12px;
  color:var(--muted);
  font-style:italic;
}

/* List Items */
.list{
  display:grid;
  gap:10px;
  margin-top:10px;
}

.listItem{
  display:grid;
  grid-template-columns:88px 1fr;
  gap:10px;
  padding:10px;
  border-radius:16px;
  background:rgba(255,255,255,.06);
  border:1px solid var(--line);
}

.listItem.note{
  background:rgba(255,165,0,.10);
  border-left:3px solid #ffa500;
}

.time{
  font-weight:750;
  font-size:13px;
}

.sub{
  color:var(--muted);
  font-size:12px;
  margin-top:2px;
}

/* Lists */
.bullets{
  margin:10px 0 0;
  padding-left:18px;
  color:var(--muted);
  line-height:1.5;
}

.bullets li{
  margin:4px 0;
}

.hint{
  margin-top:10px;
  color:var(--muted);
  font-size:12px;
  line-height:1.4;
}

/* Install Banner */
.installBanner{
  margin-top:12px;
  padding:12px;
  border-radius:16px;
  border:1px solid rgba(11,92,255,.45);
  background:rgba(11,92,255,.10);
  display:flex;
  align-items:flex-start;
  gap:12px;
}

.installBannerText{
  font-size:12px;
  color:var(--text);
  line-height:1.35;
}

.installBannerClose{
  appearance:none;
  cursor:pointer;
  margin-left:auto;
  flex:0 0 auto;
  width:32px;
  height:32px;
  border-radius:10px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.06);
  color:var(--text);
  font-size:18px;
  line-height:1;
  transition:transform 80ms ease;
}

.installBannerClose:active{
  transform:translateY(1px);
}

/* Controls */
.row{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:14px;
}

.wrap{
  flex-wrap:wrap;
}

.controls{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:flex-end;
}

.control{
  display:grid;
  gap:6px;
}

.controlLabel{
  font-size:12px;
  color:var(--muted);
  font-weight:600;
}

.select{
  appearance:none;
  cursor:pointer;
  min-width:160px;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.06);
  color:var(--text);
  font-size:14px;
  font-weight:600;
}

.select:hover{
  background:rgba(255,255,255,.08);
}

/* Day Select Group */
.daySelectGroup{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}

.dayBtn{
  appearance:none;
  cursor:pointer;
  border:1px solid var(--line);
  background:rgba(255,255,255,.06);
  color:var(--text);
  border-radius:14px;
  padding:10px 14px;
  font-weight:800;
  font-size:14px;
  min-width:48px;
  transition:all 120ms ease;
}

.dayBtn:hover:not([aria-pressed="true"]):not(.active){
  background:rgba(255,255,255,.08);
}

.dayBtn[aria-pressed="true"],
.dayBtn.active{
  border-color:rgba(11,92,255,.55);
  box-shadow:0 0 0 4px rgba(11,92,255,.15);
  background:rgba(11,92,255,.18);
}

.dayBtn:active{
  transform:translateY(1px);
}

/* Timetable */
.timetable{
  margin-top:14px;
  border-radius:16px;
  overflow:hidden;
  border:1px solid var(--line);
}

.timetableHeader,
.tr{
  display:grid;
  grid-template-columns:100px 1fr auto auto; /* 4 Spalten: Zeit, Fach, Lehrer, Raum */
}

.th,
.td{
  padding:10px 12px;
  border-bottom:1px solid var(--line);
  overflow:hidden;
  min-width:0;
  overflow-wrap:break-word;
  word-break:break-word;
}

.timetableHeader{
  background:rgba(255,255,255,.08);
  font-weight:750;
}

.timetableEmpty{
  padding:20px 16px;
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  gap:12px;
  color:var(--muted);
  font-size:14px;
}

/* Heute-Button neben Klassen-Auswahl */
.classControl{
  display:flex;
  align-items:flex-end;
  gap:8px;
  flex-wrap:wrap;
}
.classControl label{
  display:flex;
  flex-direction:column;
  gap:4px;
}
.heuteBtn{
  padding:8px 14px;
  white-space:nowrap;
}

/* ── Kalender ────────────────────────────────────────────────────────── */

.calCard{
  margin-top:0;
}

.calHeader{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:8px;
  flex-wrap:wrap;
  margin-bottom:12px;
}

.calToggles{
  display:flex;
  gap:6px;
  flex-wrap:wrap;
}

.calToggle{
  display:flex;
  align-items:center;
  gap:5px;
  padding:4px 10px;
  border-radius:99px;
  border:1px solid var(--line);
  background:var(--surface2);
  color:var(--text);
  font-size:12px;
  font-weight:600;
  cursor:pointer;
  transition:opacity 150ms;
}
.calToggle[data-active="false"]{
  opacity:.4;
}

.calDot{
  width:8px;
  height:8px;
  border-radius:50%;
  flex-shrink:0;
}

.calNav{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:10px;
}

.calNavBtn{
  width:34px;
  height:34px;
  border-radius:10px;
  border:1px solid var(--line);
  background:var(--surface2);
  color:var(--text);
  font-size:22px;
  line-height:1;
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  transition:background 100ms;
}
.calNavBtn:hover{
  background:rgba(255,255,255,.1);
}

.calMonthLabel{
  font-weight:750;
  font-size:15px;
}

.calWeekHeader{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  text-align:center;
  font-size:11px;
  color:var(--muted);
  font-weight:700;
  margin-bottom:4px;
  letter-spacing:.04em;
}

.calGrid{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:2px;
}

.calCell{
  aspect-ratio:1;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  padding:4px 2px 2px;
  border-radius:8px;
  cursor:pointer;
  font-size:13px;
  transition:background 100ms;
}
.calCell:hover{
  background:rgba(255,255,255,.07);
}
.calCell.otherMonth{
  opacity:.28;
}
.calCell.today .calDayNum{
  background:var(--accent);
  color:#fff;
  border-radius:50%;
  width:22px;
  height:22px;
  display:flex;
  align-items:center;
  justify-content:center;
}
.calCell.selected{
  background:rgba(124,106,247,.25);
  outline:1px solid rgba(124,106,247,.5);
}

.calDayNum{
  font-size:13px;
  line-height:1;
}

.calEventDots{
  display:flex;
  gap:2px;
  flex-wrap:wrap;
  justify-content:center;
  margin-top:2px;
}

.calEventDot{
  width:5px;
  height:5px;
  border-radius:50%;
  flex-shrink:0;
}

.calEvents{
  margin-top:14px;
  display:grid;
  gap:6px;
}

.calEvent{
  padding:8px 10px;
  border-radius:10px;
  background:var(--surface2);
  border-left:3px solid var(--calColor, #58b4ff);
  font-size:13px;
}

.calEventTitle{
  font-weight:700;
}

.calEventMeta{
  margin-top:2px;
}

.calNoEvents{
  padding:8px 0;
}

.tr:nth-child(even){
  background:rgba(255,255,255,.04);
}

.tr:last-child .td{
  border-bottom:none;
}

.td small{
  color:var(--muted);
  font-size:12px;
}

.tr.note{
  background:rgba(255,165,0,.10);
  border-left:3px solid #ffa500;
}

.weekCell.note{
  background:rgba(255,165,0,.10);
  border-left:2px solid #ffa500;
}

/* Week Grid */
.weekGrid{
  margin-top:14px;
  border-radius:16px;
  overflow:auto;
  border:1px solid var(--line);
  background:rgba(255,255,255,.04);
}

.weekTable{
  min-width:720px;
}

.weekRow{
  display:grid;
  grid-template-columns:110px repeat(5,minmax(0,1fr));
}

.weekCell{
  padding:10px 8px;
  border-bottom:1px solid var(--line);
  border-right:1px solid var(--line);
  overflow:hidden;
  min-width:0;
}

.weekRow .weekCell:last-child{
  border-right:none;
}

.weekRow:last-child .weekCell{
  border-bottom:none;
}

.weekHeader{
  position:sticky;
  top:0;
  background:rgba(255,255,255,.08);
  font-weight:900;
  z-index:2;
}

.weekCorner{
  font-weight:900;
}

.weekSlot{
  background:var(--bg0);
  position:sticky;
  left:0;
  z-index:1;
}

.weekSlotNum{
  font-weight:900;
}

.weekSlotTime{
  font-size:12px;
  color:var(--muted);
  margin-top:2px;
}

.weekSubject{
  font-weight:800;
  font-size:12px;
  overflow-wrap:break-word;
  word-break:break-word;
  hyphens:auto;
}

.weekMeta{
  font-size:11px;
  margin-top:2px;
  color:var(--muted);
}

/* Link Cards */
.linkCards{
  display:grid;
  grid-template-columns:1fr;
  gap:10px;
  margin-top:12px;
}

.linkCard{
  display:block;
  padding:14px;
  border-radius:16px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.06);
  color:var(--text);
  text-decoration:none;
  transition:all 120ms ease;
}

.linkCard:hover{
  border-color:rgba(11,92,255,.45);
  background:rgba(11,92,255,.08);
  transform:translateY(-1px);
}

.linkCard.disabled{
  opacity:.6;
  cursor:not-allowed;
}

.linkTitle{
  font-weight:800;
  font-size:15px;
}

.linkUrl{
  color:var(--muted);
  margin-top:6px;
  font-size:12px;
}

/* Instagram Profiles */
.igProfiles{
  display:grid;
  grid-template-columns:1fr;
  gap:14px;
  margin-top:14px;
}

.igProfile{
  display:block;
  padding:16px;
  border-radius:16px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.04);
  color:var(--text);
  text-decoration:none;
  transition:all 150ms ease;
}

.igProfile:hover{
  border-color:rgba(225,48,108,.4);
  background:rgba(225,48,108,.06);
  transform:translateY(-1px);
}

.igProfileHeader{
  display:flex;
  align-items:center;
  gap:14px;
}

.igAvatarRing{
  flex-shrink:0;
  width:64px;
  height:64px;
  border-radius:50%;
  padding:3px;
  background:linear-gradient(135deg,#f09433,#e6683c,#dc2743,#cc2366,#bc1888);
}

.igAvatar{
  width:100%;
  height:100%;
  border-radius:50%;
  object-fit:cover;
  background:var(--bg0);
  border:2px solid var(--bg0);
}

.igProfileInfo{
  flex:1;
  min-width:0;
}

.igName{
  font-weight:800;
  font-size:15px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.igHandle{
  color:var(--muted);
  font-size:13px;
  margin-top:2px;
}

.igFollowers{
  font-size:12px;
  color:var(--muted);
  margin-top:2px;
}

.igFollowers:empty{
  display:none;
}

.igPreviewGrid{
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  gap:3px;
  margin-top:12px;
  border-radius:8px;
  overflow:hidden;
}

.igPreviewPlaceholder{
  aspect-ratio:1;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.04);
}

.igPreviewImg{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}

.igOpenLabel{
  display:block;
  margin-top:12px;
  text-align:center;
  font-size:13px;
  font-weight:600;
  color:var(--accent);
}

[data-theme="light"] .igPreviewPlaceholder{
  background:rgba(0,0,0,.04);
  border-color:rgba(0,0,0,.06);
}

[data-theme="light"] .igProfile{
  background:rgba(0,0,0,.02);
}

/* Footer */
.footer{
  margin-top:14px;
  padding:0 2px;
  display:flex;
  gap:10px;
  justify-content:space-between;
  flex-wrap:wrap;
}

.small{
  font-size:12px;
}

/* Responsive Design */
@media (min-width:740px){
  .hero{
    grid-template-columns:1.1fr .9fr;
    align-items:stretch;
  }
  
  .grid2{
    grid-template-columns:1fr 1fr;
  }
  
  .nav{
    top:72px;
  }
  
  .linkCards{
    grid-template-columns:1fr 1fr;
  }

  .igProfiles{
    grid-template-columns:1fr 1fr;
  }
}

@media (max-width:360px){
  .timetableHeader,
  .tr{
    grid-template-columns:80px 1fr auto auto;
  }
  
  .brandTitle{
    font-size:14px;
  }
  
  .dayBtn{
    padding:8px 12px;
    min-width:44px;
  }
}

/* Print Styles */
@media print{
  .topbar,
  .nav,
  .installBanner,
  .footer{
    display:none;
  }
  
  .main{
    max-width:100%;
  }
  
  .surface{
    box-shadow:none;
    border:1px solid #ccc;
  }
}

/* Reduced Motion */
@media (prefers-reduced-motion:reduce){
  *,
  *::before,
  *::after{
    animation-duration:0.01ms !important;
    animation-iteration-count:1 !important;
    transition-duration:0.01ms !important;
    scroll-behavior:auto !important;
  }
}

/* Dark Mode Enhancement */
@media (prefers-color-scheme:dark){
  /* Zusätzliche Anpassungen für Systeme mit Dark Mode Präferenz */
  :root:not([data-theme="light"]){
    color-scheme:dark;
  }
}

/* High Contrast Mode */
@media (prefers-contrast:high){
  .surface{
    border-width:2px;
  }
  
  .btn{
    border-width:2px;
  }
}
